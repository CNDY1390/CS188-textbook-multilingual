<!-- Language Selector with Flags -->
<div class="language-selector" style="position: fixed; top: 80px; right: 20px; z-index: 1000; background: var(--body-background-color); border: 1px solid var(--border-color); border-radius: 6px; padding: 8px 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
  <select id="languageSelect" onchange="switchLanguage(this.value)" style="border: none; background: transparent; cursor: pointer; font-size: 14px; padding: 4px;">
    <option value="en" {% if page.lang == nil or page.lang == 'en' %}selected{% endif %}>ðŸ‡ºðŸ‡¸ English</option>
    <option value="zh-cn" {% if page.lang == 'zh-cn' %}selected{% endif %}>ðŸ‡¨ðŸ‡³ ç®€ä½“ä¸­æ–‡</option>
    <!-- Add more languages here:
    <option value="ja">ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž</option>
    <option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
    <option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
    -->
  </select>
</div>

<script>
function switchLanguage(lang) {
  var currentPath = window.location.pathname;
  var newPath;
  
  if (lang === 'en') {
    // Switch to English: remove /zh-cn/ prefix
    newPath = currentPath.replace('/zh-cn/', '/');
  } else {
    // Switch to other language
    if (currentPath.includes('/zh-cn/')) {
      // Already in zh-cn, stay here or switch to another lang
      newPath = currentPath;
    } else {
      // Add language prefix
      var basePath = '{{ site.baseurl }}';
      var relativePath = currentPath.replace(basePath, '');
      newPath = basePath + '/' + lang + relativePath;
    }
  }
  
  // Handle index pages
  if (newPath.endsWith('/')) {
    newPath += 'index.html';
  }
  
  window.location.href = newPath;
}
</script>

<style>
.language-selector select {
  outline: none;
}
.language-selector select:hover {
  opacity: 0.8;
}
/* Make it responsive on mobile */
@media (max-width: 768px) {
  .language-selector {
    top: 60px;
    right: 10px;
    padding: 6px 8px;
  }
  .language-selector select {
    font-size: 12px;
  }
}
</style>
